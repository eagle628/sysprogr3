
# generat_dataset

まだ全然できてません,とりあえず動きます

## 処理フロー

- シャープ度合いフィルタリング
  - フルHD(1920*1080)以上の画像をフルHDサイズまでリサイズ
  - Laplacian(画像のシャープ度合い)を評価
  - しきい値以上の画像を全て出力(ファイル名前_ラベル名_uuid.png)
- サイズ処理とかもろもろ
  - ランダムに画像を抽出
  - 抽出された画像に対してランダムな位置で正方形クロップをn(>=1)回行う
  - クロップされた画像をk(<=1)倍に縮小して画素数を減らす
  - 全て吐き出し

## 使い方


**注意:Python2.7で書かれています（3だとエラー出ます多分）**

```
.
└── loot
    ├──  generatedataset.py   <- メインスクリプト
    ├── filterd_images　<-　ラプラシアン評価後の画像が全て吐き出されるフォルダ
    ├── generated_images　<- 最終生成物が全て入るフォルダ
    └──original_images　<-　生画像データをラベルごとにディレクトリ分けして入れるフォルダ
        └──　label1
        ├── label2
        ├── label3
        └── labelN
            └── image1.jpg
            ├── image2.jpg
            ├── image2.jpg
            ・・・
```

original_imagesディレクトリに、ラベルごとにフォルダ分けされた写真を全てぶちこんでスクリプトを実行してください
generated_imagesディレクトリに処理後のデータが入ります

上書きはしてくれないので、何度もスクリプトを実行すると、生成物がたまります（都度削除してください）

### パラメータ

ソースのこの部分をいじってください

```python
threshold = 200 #微分フィルタ評価値のスレッショルド
decimate_rate = 0 #間引き率　0~1 (間引きされる割合　1ならすべて間引き　0で全通過)
crop_number = 3 #一枚の画像から切り抜き画像を吐き出す数
crop_size = 1000 #クロップ（正方形）するときの辺のピクセル数
resize_scale = 1 #クロップしたあとのリサイズスケール
```
